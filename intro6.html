<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mechatronics Club Introduction</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0a0a0a; color: #f0f0f0; overflow: hidden; }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .font-tech-mono { font-family: 'Share Tech Mono', monospace; }
        #particle-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        #video-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 2; }
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 1.5s ease-in-out, transform 8s linear; transform: scale(1.05); }
        .slide.active { opacity: 1; transform: scale(1.15); }
        .slide img, .slide video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(ellipse at center, rgba(10, 10, 10, 0.4) 0%, rgba(10, 10, 10, 0.9) 100%); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; z-index: 3; }
        .text-slide { position: absolute; opacity: 0; transition: opacity 1s ease-in-out, transform 1s ease-in-out; transform: translateY(20px); }
        .text-slide.active { opacity: 1; transform: translateY(0); }
        .progress-bar-container { position: absolute; bottom: 0; left: 0; width: 100%; height: 5px; background-color: rgba(255, 255, 255, 0.2); z-index: 10; }
        .progress-bar { height: 100%; background: linear-gradient(90deg, #00c6ff, #0072ff); width: 0%; transition: width 0.05s linear; }
        .start-button { padding: 1rem 2rem; font-size: 1.25rem; font-weight: 600; color: white; background: linear-gradient(90deg, #00c6ff, #0072ff); border: none; border-radius: 0.5rem; cursor: pointer; text-transform: uppercase; letter-spacing: 2px; box-shadow: 0 0 15px rgba(0, 198, 255, 0.5), 0 0 30px rgba(0, 114, 255, 0.3); transition: all 0.3s ease; }
        .start-button:hover { transform: scale(1.05); box-shadow: 0 0 25px rgba(0, 198, 255, 0.7), 0 0 50px rgba(0, 114, 255, 0.5); }
        .skip-button { position: absolute; bottom: 20px; right: 20px; background: rgba(0,0,0,0.4); color: white; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 14px; transition: background 0.3s; z-index: 10; }
        .skip-button:hover { background: rgba(0,0,0,0.7); }
        #terminal-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #0c0c0c; z-index: 100; display: none; align-items: center; justify-content: center; opacity: 0; transition: opacity 1s ease; }
        #terminal { width: 90%; max-width: 800px; height: 80%; max-height: 600px; color: #00ff41; text-shadow: 0 0 5px #00ff41; padding: 20px; }
        .cursor { display: inline-block; width: 10px; height: 1.2em; background: #00ff41; animation: blink 1s step-end infinite; }
        @keyframes blink { from, to { background: transparent } 50% { background: #00ff41; } }
    </style>
</head>
<body>
    <canvas id="particle-canvas"></canvas>
    <div id="terminal-container"><div id="terminal" class="font-tech-mono"></div></div>
    <div id="video-container"></div>
    <div class="overlay" id="text-overlay"></div>
    <div id="start-screen" class="overlay flex-col items-center justify-center bg-black/90 z-50">
        <div class="text-center">
            <h1 class="font-orbitron text-5xl md:text-7xl font-bold text-white mb-4" style="text-shadow: 0 0 10px #00c6ff;">Mechatronics Club</h1>
            <p class="text-xl md:text-2xl text-gray-300 mb-8">Welcome to the Future of Innovation</p>
            <button id="start-button" class="start-button">Play Introduction</button>
        </div>
    </div>
    <div id="progress-container" class="progress-bar-container hidden"><div id="progress-bar" class="progress-bar"></div></div>
    <div id="skip-button" class="skip-button hidden">Skip</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Elements ---
            const videoContainer = document.getElementById('video-container');
            const textOverlay = document.getElementById('text-overlay');
            const startScreen = document.getElementById('start-screen');
            const startButton = document.getElementById('start-button');
            const terminalContainer = document.getElementById('terminal-container');
            const terminal = document.getElementById('terminal');
            const progressBar = document.getElementById('progress-bar');
            const progressContainer = document.getElementById('progress-container');
            const skipButton = document.getElementById('skip-button');

            // --- Sound Effects ---
            const typingSound = new Audio('https://www.soundjay.com/buttons/sounds/button-20.mp3');
            typingSound.volume = 0.6;

            // --- Playlist Configuration ---
            const mediaPlaylist = [
                { type: 'video', src: 'VID_20240911_132457-2-2.mp4', startTime: 25, endTime: 38 },
                { type: 'image', src: 'DSC_0596.jpg', duration: 6 },
                { type: 'video', src: 'VID_20240911_131236-2.mp4', startTime: 1, endTime: 5 },
                { type: 'image', src: 'DSC_0731.jpg', duration: 6 },
                { type: 'video', src: 'VID-20250215-WA0058.mp4', startTime: 2, endTime: 7 },
                { type: 'video', src: 'VID_20250215_144222.mp4', startTime: 56, endTime: 61 },
                { type: 'video', src: 'VID20250216163652.mp4', startTime: 0, endTime: 5 },
                { type: 'image', src: 'DSC_0802.jpg', duration: 6 },
                { type: 'image', src: '20240912_181451.jpg', duration: 6 },
                { type: 'image', src: 'PXL_20250216_121547800.NIGHT.jpg', duration: 7 }
            ];
             // Calculate durations for videos
            mediaPlaylist.forEach(item => {
                if (item.type === 'video') {
                    item.duration = item.endTime - item.startTime;
                }
            });
            const totalDuration = mediaPlaylist.reduce((acc, item) => acc + item.duration, 0) * 1000;

            const texts = [
                { line1: 'Ideas Taking Flight.', line2: 'We build, we innovate, we soar.' },
                { line1: 'A Team United by Passion.', line2: 'Meet the minds behind the machines.' },
                { line1: 'Intelligent Systems in Motion.', line2: 'Engineering complex solutions for real-world challenges.' },
                { line1: 'Precision in Every Component.', line2: 'Designed and built from the ground up.' },
                { line1: 'From Knowledge to Application.', line2: 'Sharing expertise and fostering growth.' },
                { line1: 'Where Theory Meets Practice.', line2: 'Hands-on learning is our foundation.' },
                { line1: 'Competition and Collaboration.', line2: 'Putting our creations to the test.' },
                { line1: 'Fusing Mechanics and Code.', line2: 'The art of intelligent automation.' },
                { line1: 'Celebrating Our Achievements.', line2: 'A journey of innovation and teamwork.' },
                { line1: 'Ready to Build the Future?', line2: 'Join the Mechatronics Club.' }
            ];

            // --- State Variables ---
            let currentSlide = -1;
            let slideTimeout;
            let progressInterval;

            // --- Core Functions ---
            function preloadMedia() {
                mediaPlaylist.forEach((media, index) => {
                    const slideDiv = document.createElement('div');
                    slideDiv.classList.add('slide');
                    slideDiv.id = `slide-${index}`;
                    if (media.type === 'image') {
                        const img = new Image();
                        img.src = media.src;
                        slideDiv.appendChild(img);
                    } else if (media.type === 'video') {
                        const video = document.createElement('video');
                        video.src = media.src;
                        video.muted = true; video.preload = 'auto'; video.playsInline = true;
                        slideDiv.appendChild(video);
                    }
                    videoContainer.appendChild(slideDiv);
                    const textDiv = document.createElement('div');
                    textDiv.classList.add('text-slide');
                    textDiv.id = `text-${index}`;
                    textDiv.innerHTML = `<h2 class="font-orbitron text-3xl md:text-5xl lg:text-6xl font-bold mb-4 text-white" style="text-shadow: 0 0 8px rgba(0,198,255,0.7);"></h2><p class="text-lg md:text-2xl text-gray-200"></p>`;
                    textOverlay.appendChild(textDiv);
                });
            }

            function updateSlide() {
                // Deactivate previous slide
                if (currentSlide > -1) {
                    const prevSlideDiv = document.getElementById(`slide-${currentSlide}`);
                    if (prevSlideDiv) {
                        prevSlideDiv.classList.remove('active');
                        const prevVideo = prevSlideDiv.querySelector('video');
                        if (prevVideo) prevVideo.pause();
                    }
                    document.getElementById(`text-${currentSlide}`)?.classList.remove('active');
                }

                // Move to next slide
                currentSlide++;

                // If slideshow is over, end it
                if (currentSlide >= mediaPlaylist.length) {
                    endVideo();
                    return;
                }
                
                // Activate new slide
                const currentMedia = mediaPlaylist[currentSlide];
                const newSlideDiv = document.getElementById(`slide-${currentSlide}`);
                newSlideDiv.classList.add('active');

                if (currentMedia.type === 'video') {
                    const video = newSlideDiv.querySelector('video');
                    video.currentTime = currentMedia.startTime;
                    video.play();
                }

                const newTextEl = document.getElementById(`text-${currentSlide}`);
                setTimeout(() => {
                    if (newTextEl) {
                        newTextEl.classList.add('active');
                        const h2 = newTextEl.querySelector('h2');
                        const p = newTextEl.querySelector('p');
                        typeWriter(h2, texts[currentSlide].line1);
                        setTimeout(() => typeWriter(p, texts[currentSlide].line2, 40), texts[currentSlide].line1.length * 50 + 200);
                    }
                }, 500);

                // Set timeout for the next slide
                slideTimeout = setTimeout(updateSlide, currentMedia.duration * 1000);
            }

            function startVideo() {
                playMusic();
                progressContainer.classList.remove('hidden');
                skipButton.classList.remove('hidden');
                currentSlide = -1;
                
                let elapsedTime = 0;
                progressInterval = setInterval(() => {
                    elapsedTime += 50;
                    progressBar.style.width = `${(elapsedTime / totalDuration) * 100}%`;
                    if (elapsedTime >= totalDuration) {
                        clearInterval(progressInterval);
                    }
                }, 50);

                updateSlide();
            }

            function endVideo(isSkip = false) {
                clearTimeout(slideTimeout);
                clearInterval(progressInterval);
                if (Tone.Transport.state === 'started') Tone.Transport.stop();
                
                startScreen.style.display = 'flex';
                setTimeout(()=> {
                     startScreen.style.opacity = '1';
                }, 50);
               
                startScreen.style.zIndex = '50';
                startScreen.querySelector('h1').textContent = "Mechatronics Club";
                startScreen.querySelector('p').textContent = "Build The Future With Us.";
                startButton.textContent = "Replay";

                const activeSlide = document.querySelector('.slide.active');
                if (activeSlide) {
                    const video = activeSlide.querySelector('video');
                    if (video) video.pause();
                    activeSlide.classList.remove('active');
                }
                document.querySelector('.text-slide.active')?.classList.remove('active');
                progressContainer.classList.add('hidden');
                skipButton.classList.add('hidden');
                 if(isSkip) {
                   startScreen.style.transition = 'opacity 0.5s ease';
                }
            }
            
            // --- Helper & Event Listener Functions ---
            let synth, musicStarted = false;
            const bootSequence = ['Booting MechaCore OS v2.5...', 'Initializing modules... [OK]', 'Connecting to neural network... [OK]', 'Loading creative drivers... [OK]', 'Compiling project showcases... [DONE]', 'Reticulating splines... [COMPLETE]', 'Preparing presentation...', 'Launch sequence initiated.'];
            
            function runTerminal() {
                let lineIndex = 0;
                let charIndex = 0;
                terminal.innerHTML = '';
                function typeLine() {
                    if (lineIndex < bootSequence.length) {
                        const line = bootSequence[lineIndex];
                        if (charIndex < line.length) {
                            terminal.innerHTML += line.charAt(charIndex);
                            typingSound.currentTime = 0;
                            typingSound.play().catch(e => {});
                            charIndex++;
                            setTimeout(typeLine, 30); // Classic Tech character speed
                        } else {
                            terminal.innerHTML += '<br>';
                            lineIndex++;
                            charIndex = 0;
                            setTimeout(typeLine, 200); // Classic Tech line break speed
                        }
                    } else {
                        terminal.innerHTML += '<span class="cursor"></span>';
                        setTimeout(() => {
                            terminalContainer.style.opacity = '0';
                            setTimeout(() => {
                                terminalContainer.style.display = 'none';
                                startVideo();
                            }, 1000);
                        }, 1000);
                    }
                }
                typeLine();
            }

            function startIntroSequence() { Tone.start(); startScreen.style.transition = 'opacity 0.5s ease'; startScreen.style.opacity = '0'; setTimeout(() => startScreen.style.display = 'none', 500); setTimeout(() => { terminalContainer.style.display = 'flex'; setTimeout(() => { terminalContainer.style.opacity = '1'; runTerminal(); }, 100); }, 500); }
            function playMusic() { if (musicStarted) return; synth = new Tone.PolySynth(Tone.Synth, { oscillator: { type: 'fmsquare' }, envelope: { attack: 0.01, decay: 0.1, sustain: 0.2, release: 1 } }).toDestination(); const pattern = new Tone.Pattern((time, note) => { synth.triggerAttackRelease(note, '8n', time); }, ['C3', 'E3', 'G3', 'B3', 'C4', 'B3', 'G3', 'E3'], 'randomWalk'); pattern.interval = '8n'; Tone.Transport.bpm.value = 100; Tone.Transport.start(); pattern.start(0); musicStarted = true; }
            function typeWriter(element, text, speed = 50) { element.innerHTML = ""; let i = 0; function type() { if (i < text.length) { element.innerHTML += text.charAt(i); i++; setTimeout(type, speed); } } type(); }
            startButton.addEventListener('click', startIntroSequence); skipButton.addEventListener('click', () => endVideo(true));
            const canvas = document.getElementById('particle-canvas'); const ctx = canvas.getContext('2d'); let particlesArray; function setupCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; } window.addEventListener('resize', setupCanvas); class Particle { constructor(x, y, dX, dY, size) { this.x = x; this.y = y; this.directionX = dX; this.directionY = dY; this.size = size; } draw() { ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false); ctx.fillStyle = 'rgba(0, 198, 255, 0.5)'; ctx.fill(); } update() { if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX; if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY; this.x += this.directionX; this.y += this.directionY; this.draw(); } } function initParticles() { particlesArray = []; let num = (canvas.height * canvas.width) / 9000; for (let i = 0; i < num; i++) { let s = (Math.random() * 2) + 1; let x = (Math.random() * ((innerWidth - s * 2) - (s * 2)) + s * 2); let y = (Math.random() * ((innerHeight - s * 2) - (s * 2)) + s * 2); let dX = (Math.random() * .4) - .2; let dY = (Math.random() * .4) - .2; particlesArray.push(new Particle(x, y, dX, dY, s)); } } function connectParticles() { let oV = 1; for (let a = 0; a < particlesArray.length; a++) { for (let b = a; b < particlesArray.length; b++) { let dist = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x)) + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y)); if (dist < (canvas.width / 7) * (canvas.height / 7)) { oV = 1 - (dist / 20000); ctx.strokeStyle = `rgba(0, 114, 255, ${oV})`; ctx.lineWidth = 1; ctx.beginPath(); ctx.moveTo(particlesArray[a].x, particlesArray[a].y); ctx.lineTo(particlesArray[b].x, particlesArray[b].y); ctx.stroke(); } } } } function animateParticles() { requestAnimationFrame(animateParticles); ctx.clearRect(0, 0, innerWidth, innerHeight); for (let i = 0; i < particlesArray.length; i++) { particlesArray[i].update(); } connectParticles(); }
            
            // --- Initial Setup ---
            preloadMedia();
            setupCanvas();
            initParticles();
            animateParticles();
        });
    </script>
</body>
</html>